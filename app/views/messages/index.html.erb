

<h1>Chat</h1>
<ul id="chat">
  <%= render @messages %>
</ul>

<%= form_for Message.new(receiver_id: params[:receiver_id],sender_id: current_user.id) do |f| %>
  <%= f.hidden_field :sender_id %>
  <%= f.hidden_field :receiver_id %>

  <%= f.text_field :content %>
  <%= f.submit "Send" %>
  
<% end %>

<script>
var element = $('ul > li.message').last().position();
if (typeof(element) != 'undefined' && element != null){
  $('#chat').scrollTop($('ul > li.message').last().position().top + $('ul > li.message').last().height());
}
</script>